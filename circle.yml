machine:
  python:
    version: 2.7.11
  post:
    - pyenv global 2.7.11 3.5.1
dependencies:
  pre:
    - | 
        git clone https://github.com/jonrkarr/junit2html.git ~/junit2html
        cd ~/junit2html
        python setup.py sdist
        pip2 install dist/junit2html-*.tar.gz
        pip3 install dist/junit2html-*.tar.gz
    - pip2 install wheel
    - pip3 install wheel
    - python2 setup.py bdist_wheel
    - python3 setup.py bdist_wheel
    - pip2 install dist/Karr_Lab_build_utils-*-py2-none-any.whl
    - pip3 install dist/Karr_Lab_build_utils-*-py3-none-any.whl
    - karr-lab-build-utils-2 install-requirements
    - karr-lab-build-utils-3 install-requirements
test:
  override:
    - karr-lab-build-utils-2 run-tests tests --with-xunit --with-coverage
    - karr-lab-build-utils-3 run-tests tests --with-xunit --with-coverage
  post:
    - karr-lab-build-utils make-and-archive-reports
