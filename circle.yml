machine:
  python:
    version: 2.7.11
  post:
    - pip install wheel    
    - | 
        cd $CIRCLE_PROJECT_REPONAME
        python setup.py bdist_wheel
        pip install -I dist/Karr_Lab_build_utils-*-py2.py3-none-any.whl
        karr-lab-build-utils-setup-machine
        pip3 install -I dist/Karr_Lab_build_utils-*-py2.py3-none-any.whl
    - | 
        pip uninstall -y junit2html
        git clone https://github.com/jonrkarr/junit2html.git
        cd junit2html
        python setup.py sdist
        pip install -I dist/junit2html-*.tar.gz
        pip3 install -I dist/junit2html-*.tar.gz
dependencies:
  pre:
    - karr-lab-build-utils-install-requirements
test:
  override:
    - karr-lab-build-utils-run-tests --test_path tests --with_xml_report --with_coverage
  post:
    - karr-lab-build-utils-make-and-archive-reports
